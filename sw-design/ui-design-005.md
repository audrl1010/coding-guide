# UI Component Design - 5. 컨트롤러 적용

UI가 포함된 프로젝트에서는 일반적으로 MVC 계통의 아키텍처를 업무에 응용하고 있습니다.

그 중 웹프론트엔드는 각 컴포넌트의 상태에 대한 관리자를 따로 두는 `Flux Architecture` 를 많이 응용 하고 있습니다.

우린 React 의 Context API 기반의 아키텍처를 이용하고 있지만 전체 상태를 총괄하는 단 하나의 Store 를 두지 않고 필요한 곳마다 State 를 두는,

굳이 명명하자면 `Lesser Flux` ..라 부를 수 있을까요.

~~나의 플럭스는 이렇지 않아~~

이하 현재 사용되는 방법을 통틀어 `아키텍처`라 언급 하겠습니다.

## 사용처 추가

Header 와 ShopList 에 대해서 정의는 끝났습니다.

근데 이들을 이용하는 사용처(Client)가 빠졌습니다.

> **알아두세요!**
>
> 사용처는 특정 기능을 사용하거나 필요로 하는 곳 입니다.
>
> 가령 Controller 가 있고 이들을 이용하는 Service 가 있다고 가정하면 Service 의 사용처는 Controller 가 되는 것입니다.
>
> 따라서 사용처는 위치에 따라 다르게 정의가 됩니다.

여기서의 사용처란 바로 컨테이너(Container) 컴포넌트 입니다.

그럼 컨테이너가 Header 와 ShopList 를 각각 이용하는 것을 다이어그램으로 표현해 보겠습니다.

![](images/ui-design-005/ui-design-005.png)

props 로 자료가 전달되는 것은 생략 했습니다.

만약 여러분이 이후 Container 와 같은 `Controller Component` 와 일반 표현용 `Presentational Component` 의 관계를 잘 이해 하고 계신다면 이정도로 끝을 맺어도 상관 없습니다. (물론 HeaderContainer 에 약간 손볼게 남아 있긴 합니다..)

하지만 분명 컨테이너 컴포넌트에 대한 상세한 스펙이 설계도에 녹아 있어야 할 때가 있을 수 있으므로 이에 대한 방법을 알아 보겠습니다.

## 도메인의 관심사

아키텍처 관점에서 화면 출력에 대해선 끝이 났습니다.

하지만 이들을 제어하는 컨트롤러가 필요합니다.

React 에서는 그 역할을 일반적으로 Container 가 맡고 있습니다.

Container 가 무엇이죠? 기억 하시나요?

네! `하나의 작은 업무가 완성되는 장소` 입니다.

이 `작은 업무`라 함은 하나의 도메인(Domain)을 뜻합니다.

다른 소프트웨어도 마찬가지겠지만, 한번 도메인이 정해지면 그 도메인을 이용하는 회사가 끝장(?) 나거나 관련 서비스가 망할때(!) 까지는 그 어떤 방법으로든 그 도메인은 사라지지 않고 회사와 함께 숨쉬게(?) 됩니다.

다만, 사용하는 형태나 세부적인 구성요소의 차이점이 있을 뿐이지요.

즉 도메인은 지금껏 열심히 고민해 온 UI Component 가 어떻게 구성되어 업무를 수행할지

거~~~의 관심 없습니다. ~~(100%가 아님을 유의)~~

그렇다고 지금껏 한 것이 다 필요 없었다는 얘기가 아닙니다!

관심이 없을 뿐이지, 필요 없다고는 얘기 안했습니다! 😅

다시 돌아와서,

Container 를 컨트롤러로 둘 것인데 우선 `ShopList` 를 어떻게 제어할지 고민 해 보겠습니다.

## ShopListContainer 작성

ShopList 가 필요로 하는게 어떤게 있을까요?

바로 출력 때 필요한 자료 `items` 와 좋아요! ..를 눌렀을 때 이를 후속 처리 할 `onLikeChange` 에 대한 이벤트 핸들러 입니다.

ShopList 입장에선 이들 2개만 제공 해주면 됩니다.

간단하죠? 🙂

이들에 대하여 다이어그램을 그리자면 다음과 같습니다.

![](images/ui-design-005/ui-design-005-Container002.png)

엇! 근데 이전에 그려왔던 다이어그램과 차이점이 보이실까요?

혹시 못보셨다면 클래스 멤버 좌측 기호가 `+(plus)` 가 아니라 `-(minus)` 인 것을 찾아 보세요!

이 것은 접근 제한자(Access Modifier) 입니다.

`+` 는 공개된 것으로써 `public` 을 뜻하고, `-` 는 감춰져서 자기 자신만 쓸 수 있는 것이므로 `private` 입니다.

그럼 Container 는 이 items 와 핸들러를 어떻게 제어 해야 할까요?

내부에 뭔가가 있어야 하지 않을까요?

네! 그래서 `Interactor` 를 내장 시켜야 합니다!

> **알아두세요!**
>
> 인터렉터(Interactor)는 사이드 이펙트 처리기(Side-Effect Handler) 입니다.
>
> 이 것은 객체(Object)로써, 상태를 바꿀 수 있는 액션(Action)을 제공하며 이걸 수행하면 디스패처(Dispatcher)를 통해 관리되는 상태(State)를 변경해 줍니다.

이번 도메인을 수행하기 위해 알맞은 인터렉터는 어떤 모습이어야 할까요?

음.. 🤔

근데 인터렉터도 얘기하자면 길어져서 저는 짧게 그냥 `여기엔 인터렉터가 필요하다. 이하 생략..` 정도로 연관 시키고 끝을 맺으려 합니다.

양해 바랍니다 😅

인터렉터는 컨테이너 입장에선 `어떤 기능을 제공해주는 것` 이므로 서비스(Service)에 가깝다고 할 수 있겠습니다.

대체로 컴포넌트나 컨트롤러나 그외 다른 사용처에서 서비스를 바라보는 관점에 대해 한마디로 말하자면 `의존성(Dependency)` 이라 할 수 있습니다.

A 가 B 에 대하여 의존성을 가질 땐 아래와 같이 작성 합니다.

![](images/ui-design-005/ui-design-005-Dependency.png)

이럴 땐 일반적으로 A 내부에 B 의 인스턴스(instance)를 내장하거나 B 를 사용할 수 있는 Factory, Singleton 같은 생성자(Creator)에 접근할 수 있습니다.
